import Link from "next/link";
import { useState, useEffect } from "react";
import Menu from "./Menu";
import Cart from "./Cart";
import { useRouter } from "next/router";

export default function Nav({ cartControl }: { cartControl?: boolean }) {

  const router = useRouter();

  const [menu, setMenu] = useState(false);
  const [cart, setCart] = useState(false);

  const toggleCart = (newState: boolean) => {
    setCart(newState);
    // if (cartControl) cartControl(newState);
    if (newState) setMenu(false);
  };

  useEffect(() => {
    if (cartControl) {
      setCart(true);
    }
  }, [cartControl]);

  return(
    <>
      <nav>
        <div className="w-12 md:w-24 text-right">
          <button 
            onClick={() => {
              setMenu(!menu);
              if (!menu) setCart(false);
            }}
            disabled={router.pathname === "/"}
            className="disabled:hidden"
          >
            {!menu ? "Menu" : "(Close)"}
          </button>
        </div>
        <div className="-mt-1">
          <Link href="/">
            <svg width="235" height="43" viewBox="0 0 235 43" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M77.029 14.6993C78.7049 19.3852 82.8385 22.9212 87.8935 23.7838V23.7799C86.9229 18.6731 82.4413 14.7953 77.029 14.6993ZM88.0862 25.8546C88.0862 28.1216 87.4043 30.231 86.2302 31.9917L68.1594 18.7261C69.9414 16.6043 72.5012 15.1458 75.4077 14.7851C77.2092 20.3471 82.0986 24.5393 88.0765 25.3821C88.0823 25.5383 88.0862 25.6955 88.0862 25.8546ZM76.5559 37.0841C71.1437 36.9901 66.6621 33.1132 65.6915 28.0073V28.0006C70.7479 28.866 74.88 32.3992 76.5559 37.0841ZM65.4983 25.9317C65.4983 23.6633 66.1822 21.5539 67.3543 19.7941L85.4251 33.0606C83.6451 35.183 81.0832 36.641 78.1768 36.9978C76.3753 31.4387 71.4878 27.2485 65.508 26.4037C65.5022 26.248 65.4983 26.0889 65.4983 25.9317ZM89.3361 25.8582C89.3361 32.705 83.7326 38.2555 76.8202 38.2555C69.9078 38.2555 64.3042 32.705 64.3042 25.8582C64.3042 19.0114 69.9078 13.4609 76.8202 13.4609C83.7326 13.4609 89.3361 19.0114 89.3361 25.8582ZM70.2178 36.3929C67.6633 34.8191 65.7231 32.3591 64.8354 29.4468C65.112 28.9944 65.3992 28.5248 65.6952 28.0406C66.3033 31.1986 68.2549 33.8841 70.9383 35.4913L70.2178 36.3929ZM85.6535 17.0765L84.8703 18.0567C82.87 16.0335 80.0988 14.7616 77.0279 14.7071C78.0063 17.4428 79.8224 19.7866 82.1705 21.4353L81.1975 22.6528C78.4995 20.7368 76.4425 17.9913 75.4065 14.7929C74.7779 14.871 74.1654 15.0003 73.5736 15.1767C73.8855 14.6683 74.1935 14.1667 74.496 13.6741C75.2487 13.5341 76.0252 13.4609 76.819 13.4609C80.2673 13.4609 83.3898 14.8422 85.6535 17.0765ZM70.3889 20.3715L69.6879 21.516L77.5145 27.2618L78.3503 26.2158L70.3889 20.3715ZM66.5761 26.6004C69.6676 27.2572 72.4194 28.8179 74.5359 30.9892L73.5551 32.2166C71.5122 30.0577 68.7835 28.5429 65.7126 28.0122L66.5761 26.6004Z" fill="black"/>
              <path fillRule="evenodd" clipRule="evenodd" d="M70.5334 20.1296H71.6438C72.5662 21.6305 75.093 21.8715 75.093 21.8715C76.0198 21.9043 77.886 21.9656 78.3596 20.8885C78.5373 20.4921 77.9975 20.0317 77.7424 19.8335C77.0829 19.3297 76.3532 18.8804 75.4809 18.984C75.4021 18.9927 75.3242 19.0086 75.2478 19.0274L75.2867 19.0414C75.624 19.1846 75.8621 19.5148 75.8621 19.9001C75.8621 20.416 75.442 20.8325 74.9226 20.8325C74.4018 20.8325 73.9812 20.4165 73.9812 19.9001C73.9812 19.5308 74.1988 19.2106 74.5147 19.0602C74.5147 19.0602 73.2458 18.6441 71.711 19.5592H70.8828C74.2622 14.0435 77.6384 8.54612 79.3914 5.72929C83.3994 -0.711614 88.7727 0.0255781 88.7727 0.0255781H122.922L121.852 4.14112H89.7827C85.0899 4.14112 83.3682 6.49348 83.3682 6.49348L80.637 10.9634L81.9518 11.7184C85.399 5.11987 89.0097 5.67095 89.0097 5.67095H121.453L120.489 9.37668H89.1295C89.1295 9.37668 87.8527 9.46443 86.2785 11.0227C84.7054 12.581 84.7054 13.3018 84.7054 13.3018L85.4467 13.7285L87.7047 10.9639L89.5452 12.2001L67.4557 39.8431L64.9391 38.1426L66.3327 35.9228L65.0949 35.0868L63.5767 37.2256L61.101 35.5521C61.101 35.5521 65.7647 27.914 70.5334 20.1296ZM70.2178 36.3929C67.6633 34.8191 65.7231 32.3591 64.8354 29.4468C65.112 28.9944 65.3992 28.5248 65.6952 28.0406C66.3033 31.1986 68.2549 33.8841 70.9383 35.4913L70.2178 36.3929ZM85.6535 17.0765L84.8703 18.0567C82.87 16.0335 80.0988 14.7616 77.0279 14.7071C78.0063 17.4428 79.8224 19.7866 82.1705 21.4353L81.1975 22.6528C78.4995 20.7368 76.4425 17.9913 75.4065 14.7929C74.7779 14.871 74.1654 15.0003 73.5736 15.1767C73.8855 14.6683 74.1935 14.1667 74.496 13.6741C75.2487 13.5341 76.0252 13.4609 76.819 13.4609C80.2673 13.4609 83.3898 14.8422 85.6535 17.0765ZM70.3889 20.3715L69.6879 21.516L77.5145 27.2618L78.3503 26.2158L70.3889 20.3715ZM66.5761 26.6004C69.6676 27.2572 72.4194 28.8179 74.5359 30.9892L73.5551 32.2166C71.5122 30.0577 68.7835 28.5429 65.7126 28.0122L66.5761 26.6004Z" fill="black"/>
              <path d="M13.9724 13.5542H24.0794L24.6708 38.2855H17.9604L18.0314 33.1541H9.25617L6.53131 38.2855H0L13.9724 13.5542ZM12.4673 27.1172L12.4094 27.2151H18.1147L18.1044 27.1331L17.8713 17.5366H17.8591L12.4673 27.1172Z" fill="black"/>
              <path d="M32.7982 13.5542H39.0491L32.3591 38.2855H26.1062L32.7982 13.5542Z" fill="black"/>
              <path d="M42.4184 13.5542H53.1768C56.1504 13.5542 58.184 14.0647 59.2792 15.0845C60.3754 16.1042 60.6266 17.7145 60.0313 19.9155C59.415 22.1927 58.2517 24.0286 56.5402 25.4244C54.9933 26.6804 53.2566 27.3785 51.3295 27.5198L55.9737 38.286H48.1267L44.8639 27.8091H44.8157L41.9799 38.286H35.7289L42.4184 13.5542ZM45.7673 24.2871H49.8658C50.688 24.2871 51.4137 24.0508 52.0392 23.5769C52.6676 23.1015 53.0877 22.4713 53.3019 21.6821C53.4912 20.9796 53.4007 20.4391 53.0317 20.0597C52.6637 19.6821 52.0392 19.4927 51.1635 19.4927H47.065L45.7673 24.2871Z" fill="black"/>
              <path d="M100.61 13.5542H110.721L111.313 38.2855H104.601L104.672 33.1541H95.896L93.1712 38.2855H86.6398L100.61 13.5542ZM99.1062 27.1172L99.0492 27.2151H104.756L104.746 27.1331L104.512 17.5366H104.501L99.1062 27.1172Z" fill="black"/>
              <path d="M112.969 38.2855L119.658 13.5542H136.466L134.859 19.4936H124.306L123.225 23.4814H133.779L132.173 29.4209H121.619L119.221 38.286L112.969 38.2855Z" fill="black"/>
              <path d="M138.898 13.5542H149.656C152.628 13.5542 154.661 14.0647 155.758 15.0845C156.855 16.1042 157.106 17.7145 156.511 19.9155C155.895 22.1927 154.731 24.0286 153.018 25.4244C151.47 26.6804 149.734 27.3785 147.808 27.5198L152.453 38.286H144.606L141.343 27.8091H141.293L138.459 38.286H132.206L138.898 13.5542ZM142.246 24.2871H146.344C147.167 24.2871 147.893 24.0508 148.519 23.5769C149.146 23.1015 149.566 22.4713 149.78 21.6821C149.972 20.9796 149.88 20.4391 149.511 20.0597C149.14 19.6821 148.519 19.4927 147.642 19.4927H143.543L142.246 24.2871Z" fill="black"/>
              <path d="M160.817 13.5542H167.069L160.376 38.2855H154.126L160.817 13.5542Z" fill="black"/>
              <path d="M172.933 42.2555L171.976 38.7542C169.335 38.3868 167.5 37.3097 166.475 35.5195C165.203 33.3026 165.167 29.9672 166.359 25.517C167.498 21.3455 169.286 18.216 171.727 16.1312C174.163 14.0455 177.262 13.0031 181.019 13.0031C185.02 13.0031 187.636 13.9804 188.872 15.9374C190.108 17.8963 190.135 21.062 188.95 25.4379L188.929 25.517C187.737 29.9672 185.891 33.3084 183.394 35.5383C181.959 36.8198 180.301 37.7373 178.426 38.285L179.656 42.255L172.933 42.2555ZM175.062 21.2578C173.872 22.4612 172.969 24.1931 172.36 26.4519C171.769 28.6345 171.748 30.3051 172.299 31.4599C172.851 32.6189 173.938 33.1965 175.56 33.1965C177.19 33.1965 178.593 32.6194 179.772 31.4599C180.951 30.3051 181.832 28.635 182.424 26.4519C183.076 24.0421 183.144 22.2737 182.635 21.1435C182.124 20.0153 181.005 19.4493 179.278 19.4493C177.658 19.4498 176.251 20.0544 175.062 21.2578Z" fill="black"/>
              <path d="M210.607 28.9431C209.727 32.2419 208.226 34.7167 206.114 36.3637C203.998 38.0165 201.276 38.8356 197.938 38.8356C194.603 38.8356 192.326 38.0165 191.111 36.3637C189.894 34.7167 189.726 32.2419 190.609 28.9431L194.773 13.5542H201.025L196.965 28.5579C196.611 29.8698 196.657 30.8707 197.11 31.5626C197.559 32.2559 198.386 32.603 199.597 32.603C200.804 32.603 201.821 32.2554 202.645 31.5626C203.47 30.8702 204.061 29.8693 204.415 28.5579L208.475 13.5542H214.77L210.607 28.9431Z" fill="black"/>
              <path d="M211.016 38.2855L217.705 13.5542H235L233.393 19.4936H222.352L221.433 22.8884H232.473L231.674 25.8511L230.866 28.8269H219.826L218.872 32.3489H229.913L228.309 38.2865L211.016 38.2855Z" fill="black"/>
            </svg>
          </Link>
        </div>
        <div className="w-12 md:w-24">
          <button onClick={() => toggleCart(!cart)}>
            {!cart ? "Cart" : "(Close)"}
          </button>
        </div>
      </nav>
      <Menu visible={menu} />
      {cart && <Cart setCartOpen={setCart} />}
    </>
  );
}